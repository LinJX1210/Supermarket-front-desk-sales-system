<!-- 课程设计可参考如下指标进行 -->

<table border="1" ><tr>
<td></td>
<td>数据字典</td>
<td>规则描述</td>
<td>ER 图（包括实体属性图、分ER 图、总ER 图）</td>
<td>关系模型（包括子模式划分、主外码设置、范式等）</td>
<td>索引、视图、权限</td>
<td>事务、触发器、存储过程</td>
<td>用户界面设计</td>
<td>代码实现</td>
<td>测试</td>
</tr><tr>
<td>学生设计情况</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr></table>

# 教师验收时可从这几个方面酌情考量

# 一、需求分析阶段：

注意！!！千万不要局限于课程设计题目给出的那些需求，鼓励同学们到实际运行的系统中深入调研，鼓励挖掘各种需求细节，尤其是业务规则细节，鼓励基于数据库课程设计的技术扩展和设计展望！

## 1、抽取客观对象及系统边界划分

提取系统中的客观对象及对应关系，用数据字典详细描述系统涉及的各数据项及数据结构。明确哪些是系统内部对象及处理流程，哪些是外部事物。确定系统参与者，绘制系统用例图。

## 2、规则描述

根据需要遵循的国家法律法规、风俗习惯、技术标准规范等，定义数据规则和处理流程规则。

### ① 数据项及数据结构本身的数据规则描述

如：根据GB11643-1999《公民身份证号码》国家标准，录入的身份证号的值为18位数字，判断输入的数字位数是否为18位，且判断出身份证号是否有效。

如：根据＊*＊学校＊*＊文件对学号编码的规定，学号的值为12位数字，判断输入的数字位数是否为12位，且判断前两位是否是有效年级、第3-7位是否是有效学院，第8-9位是否是有效专业，第10位是否是有效班级，第11-12位是否是有效序号。

### ② 处理流程规则描述

如：根据＊*＊超市／餐饮公司对收银过程的挂单／调单规则，收银员可以对暂时无法完成收银的账单进行挂单处理，同时记录下挂单的收银员、账单号、最后项目序号和时间；当顾客前来调单时，收银员需按照账单号重新调取账单，同时记录下调单时间和结账总金额；如果挂单时间超过半小时，则收银员没有权限调单，账单由系统自动撤回；不允许二次挂单，如顾客无法完成结账，则由收银课值班课长将账单撤回。

# 二、概念结构设计阶段：

## 1、实体属性图

根据数据规则描述，提取系统中的实体、属性，生成实体属性图。

## 2、实体联系图

根据数据字典及处理流程规则描述，提取系统中实体间的联系，生成实体联系图。

# 3、分E-R图集成

与同组成员在集成各分E-R图时消除了冲突和冗余（需在报告中说明消除了哪些冲突和冗余，依据是什么），生成总E-R图。

# 三、逻辑结构设计阶段：

将总E-R图表示的系统概念结构转换为由一组关系模式表达的关系模型，分离出自己所做的子系统对应的关系模式。依据数据字典写出各关系模式的基本函数依赖，并判断各关系模式达到的范式级别，一般来讲应将关系模式规范化至BCNF，如果要保持较低的范式级别，应说明所依据的数据字典中的查询需求。

# 四、物理结构设计阶段：

## 1、建立基本表

根据逻辑结构设计结果，建立由关系模式转化的基本表。依据数据字典中的数据描述设置各基本表的主码和外码，设置外码时需说明依据哪条数据规则来定义违反参照完整性时的违约处理。依据数据字典中的数据描述设置各属性域，保证用户定义的完整性。

## 2、建立索引

详细说明依据数据字典中的哪些查询需求在哪些基本表上建立哪些索引。

如：依据数据字典中对“学生”数据结构的描述，经常要通过“学号”查询学生信息，查询频率大约在＊**＊次／天，因此，在student表的Sno属性上建立非聚簇索引；经常要查询每个班级的学生平均年龄、某课程平均分，查询频率大约分别为＊**＊次／天和＊**＊次／天，因此，在student表的Sdept属性上建立聚簇索引。

## 3、建立视图

详细说明依据数据字典中的哪些数据规则或处理流程规则，应针对哪些用户建立哪些视图。

如：超市管理系统中，依据用例图中参与者“收银课值班课长”的“查询商品”用例，收银课值班课长只能查询到商品的编号、二维码、规格、产地等基本信息，不能查询到商品的进价、进货渠道等进货信息，因此，应针对收银课值班课长建立查询商品基本信息的视图viewCommInfo（附创建该视图的SQL语句）。

## 4、设置用户权限

详细说明依据系统用例图中的哪些内容和数据字典中的哪些数据规则或处理流程规则，哪些用户对哪些基本表拥有哪些权限。

如：图书管理系统中，依据用例图中参与者“借阅管理员”的用例，“借阅管理员”对图书基本信息表（book表）具有查询权限；依据“借阅”处理流程规则，“借阅管理员”对借阅记录表（borrow表）具有插入和删除权限（附Grant和Revoke语句）。

# 五、编码规范及程序设计：

## 1、事务、触发器及存储过程

详细说明依据哪条处理流程规则设计事务、触发器及存储过程（设计阶段，用算法表达即可），如下例所示：

### ① 事务

依据＊*＊超市／餐饮公司对收银过程的挂单规则，设计挂单事务：

Begin transaction

在账单表中插入当前需挂单的账单，状态设置为“挂单”；

在账单细则表中插入属于当前挂单账单的所有账单细则；

在挂单日志表中插入当前挂单的账单，内容包括收银员、账单号、最后项目序号和时间；

If SQL语句执行失败

打印出错信息；

Rollback;

Else

Commit;

End

End transaction

### ② 触发器

依据＊*＊供应管理公司对删除供应商的流程规则，在供应商表（S表）上设计一个删除触发器，使得在删除一个供应商记录时，将这个供应商的所有供应情况从spj表中删除：

CREATE TRIGGER tgsdelete ON S FOR DELETE

AS

delete from spj where sno in (select sno from deleted)

### ③ 存储过程

依据＊*＊学校的图书借阅规则设计一个借书存储过程，使得借书时的书籍不在库标志设置和增加借书记录这两个步骤用一个事务处理完成，同时在事务执行过程中引入错误触发事件：

CREATE PROCEDURE spborrow

图书编号，借阅人证号，/＊输入参数＊／

书名，借阅人姓名，图书出借状态，借阅日期 /＊输出参数＊／

AS

判断图书编号或借阅人证号是否为空，若为空则返回；

如果图书在库（未借出）

Begin transaction

修改待借图书在库标记为“出借”；

判断出错，若出错则回滚；

在借阅记录表中插入当前出借记录；

判断出错，若出错则回滚；

提交更新；

End transaction

输出当前借书信息；

如果图书已借出，打印借出信息，并提醒图书管理员核查库存；

## 2、用户交互界面设计

详细说明依据哪条处理流程规则设计用户交互界面（设计阶段，用原型表达即可，但最后编码中需要实现），如下例所示：

依据＊*＊学校的图书查找规则设计查找图书用户交互界面。其中，依据规则中的“由用户根据图书编号、书名、出版社、编者等信息动态生成查询条件”在窗体中部左侧设计查询条件区域，并依次设计以上查询条件编辑框，其中的出版社应使用下拉列表方式供用户选择；窗体中部右侧设计操作按钮区域，主要包括“开始查找”、“新查找”、“查看”、“关闭”按钮，“开始查找”按钮触发“图书查找”存储过程的执行，“新查找”按钮清空左侧的查询条件，“查看”按钮用于将图书查找结果显示在窗体下发的查询结果列表中，“关闭”按钮触发退出查找图书的界面。

（以下界面在设计过程中用原型展示即可）

<!-- 银博图书光盘租借管理系统（试用版本）-［查找图书］ 系统（5）设置（E） 借阅（I） 查看（V） 窗口（W） 帮助（H） 备份 交接班 分类 添加 编辑 查找 读者 清空 登陆 还书 帮助 操作按钮区域 全部 未借出｜已借出 图书编号 开始查找（F） 新查找（L） 设定多种 书 名 出版社 查询条件 查看 编者 关闭（C） 借出日期： 2000年1月1日☑ 至 2008年6月29日 提示：当找到的记录数超过1000条 时，系统将自动打开大窗口以方便查 看。 图书编号 书名 类别 价格 编者 出版社 是否借出 借书证号 查询结果列表 编辑借书证 CAPS 16:40 2008-6-29 -->
![](https://web-api.textin.com/ocr_image/external/ac36a35d5182feaa.jpg)

## 3、其他规则校验

对于某些数据项或数据结构需满足的规则，如果仅使用用户定义的完整性无法实现，则需在编码规范中要详细说明如何进行规则校验，如身份证号码、学号等的录入是否满足编号规则。建议在初次编号时给定若干下拉列表给用户选择号码中各号段的具体信息，后台依据信息对应的编号组合成相应的整合编号，如：17-17级、14040-信息工程学院、60-计算机专业、1-1班、36-班内序号，构成学号171404060136。

如果没有通过上述形式让用户通过选择信息录入编号，则需按照编号规则校验进行编码设计，校验编号是否满足编号规则。

# 六、系统测试及运行：

**（可以参考以下方式做几个简单测试即可，此部分不是课设重点）**

1、单元测试：用来对一个模块、一个函数或者一个类来进行正确性检验的测试工作。

2、集成测试：在单元测试的基础上，将所有模块按照设计要求组装成为子系统或系统，进行集成测试。

3、系统测试，是对整个系统的测试，将硬件、软件、操作人员看作一个整体，检验它是否有不符合系统说明书的地方。这种测试可以发现系统分析和设计中的错误。

